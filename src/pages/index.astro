---
import Paginator from "../components/Paginator";
import PostCard from "../components/PostCard";
import Layout from "../layouts/Layout.astro";
import getPublishedPosts from "../utils/getPublishedPosts";

const posts = await getPublishedPosts();
const totalPages = Math.ceil(posts.length / 5);
const paginatedPosts = posts.slice(0, 5);
---

<Layout title="Welcome">
  <div class="flex justify-between flex-wrap mb-4">
    <div class="flex flex-col gap-y-4 my-4 flex-grow">
      {paginatedPosts.map((post) => <PostCard post={post} />)}
    </div>
    <Paginator
      currentPage={1}
      totalPages={totalPages}
      index="/"
      route="/page"
    />
  </div>
</Layout>
